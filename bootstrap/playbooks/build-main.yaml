---

- name: Main build script
  hosts: all
  become: yes
  vars:
    ssh_ip_mask: "10.*.*.*"
  tasks:
  - include: centos/tasks/{{ item }}.yaml
    when: lookup('env', 'OSTYPE') == "centos"
    with_items:
      - cloud_archive
      - base
      - puppet
      - docker
      - ssh_conf

  - include: ubuntu/tasks/{{ item }}.yaml
    when: lookup('env', 'OSTYPE') == "ubuntu"
    with_items:
      - base
      - puppet
      - docker
      - cloud_archive
      - ssh_conf
